---
layout: post
title: Domain Name, DNS
date: 2024-02-22
categories: [web]
---
## 도메인 네임이란?
- **도메인 네임(Domain Name)** : *IP 주소에 매핑되는 문자열 주소 체계*  
    - 컴퓨터는 IP 주소로 통신하는데, <span style="color:blueviolet">도메인 네임은 서버(대부분 웹 서버)를 쉽게 찾을 수 있도록 해주는 주소</span>라고 할 수 있다. 
    - 도메인 네임은 <span style="color:blueviolet">DNS를 통해 해당하는 IP 주소로 변환</span>되어 웹 브라우저나 다른 응용 프로그램에서 서버를 찾을 수 있게 해준다.
    - 도메인은 영구적으로 소유하는 개념이 아니라, 일정기간 임대하는 개념이다.  
<br>
- **도메인 네임의 계층적 구조 : Subdomain.Domain.TLD**
    - **Subdomain(= Hostname)**
        - Domain의 앞에 오는 <span style="color:blueviolet">추가적인 식별 요소</span>로, 선택적으로 사용된다.  
        -> "www"가 대표적인 Subdomain이며, "blog", "mail", "shop" 등도 사용된다.   
    <br>
    - **Domain**
        - TLD 앞에 위치하며, 일반적으로 <span style="color:blueviolet">특정 기업, 조직, 서비스를 식별하는데 사용</span>된다.  
        -> "google"이나 "naver"가 Domain이다.  
    <br>
    - **TLD(Top-Level Domain)**
        - 도메인 이름의 가장 오른쪽에 위치하며, 인터넷에서 <span style="color:blueviolet">특정 종류의 기관, 지역 또는 용도</span>를 나타낸다.  
        -> "com", "org", "net" 등이 대표적인 TLD이며, "kr"(한국), "jp"(일본)과 같은 국가 코드도 TLD에 해당한다.  
    <br>
- **FQDN(Fully Qualified Domain Name)** : *도메인 네임의 전체 이름을 표기하는 방식*
    - 일반적으로 도메인 네임은 “Domain.TLD”를 의미한다.  
    - FQDN : www.naver.com
    - Domain Name : naver.com
    - Hostname : www  

---
## DNS란?
<center><img src="https://github.com/LeeJae-H/LeeJae-H.github.io/assets/122717063/0890e992-667c-468e-8979-2b5492dfdefc" width="640" height="340"></center>
- **DNS(Domain Name System)** : *인터넷에서 도메인 네임을 IP 주소로 변환하거나, IP 주소를 도메인 네임으로 변환하는 전세계적인 거대한 분산 데이터베이스 시스템*
    - DNS는 상위 기관과 하위 기관과 같은 계층 구조를 가지는 분산 데이터베이스 구조를 가진다. 상위 기관은 인증된 기관에게 도메인을 생성하거나 IP 주소로 변경할 수 있는 등의 권한을 부여한다.  

---
## DNS 구성 요소
<center><img src="https://github.com/LeeJae-H/LeeJae-H.github.io/assets/122717063/6415af66-8d2c-4b10-93c9-86b38f9862a1" width="300" height="280"></center>
1. Domain Name Space
    - Domain Name Space는 DNS가 저장 및 관리하는 계층적 구조를 의미한다.
        - Domain Name Space의 트리 구조는 최상위 레벨부터 순차적으로 계층적 소속 관계를 나타낸다.
        - 최상위에 Root DNS Server가 존재하고, 그 하위로 연결된 모든 노드가 연속해서 이어진 계층 구조로 되어 있다.
    - 하위 조직의 Name Space를 할당하고 관리하는 방식은 각 하위 기관의 관리 책임자에게 위임된다. 이러한 위임 구조는 호스트의 증가에 대한 관리가 효율적으로 이루어지는 것을 가능하게 한다.
        - “naver.com” 도메인은 “com” 도메인은 관리하는 Name Server에 등록되어 있다.
        - “www.naver.com”은 “naver.com”을 관리하는 Name Server에 등록되어 있다.
        - “blog.naver.com”을 생성하기 위해서는 “naver.com”을 관리하는 Name Server의 레코드만을 수정함으로써 가능하다.  

2. Name Server(DNS Server)
    - 도메인 네임을 IP 주소로 변환시키기 위해서는 Domain Name Space의 트리 구조에 대한 정보가 필요한데, 이러한 정보를 가지고 있는 서버를 Name Server라고 한다.
        - 데이터베이스 역할(저장 및 관리), 요청 처리 응답 구현 등
    - Root, TLD, SLD Server는 Domain Name Space를 위한 권한이 있으며, Resolver는 권한이 없다.
        - Domain Name Space를 위한 권한이 있는 DNS Server는 IP 주소와 도메인 네임을 매핑한다.
        - Domain Name Space를 위한 권한이 없는 DNS Server는 질의를 통해 IP 주소를 알아내거나 캐시한다.
    - Root DNS Server
        - ICANN이 직접 관리하는 절대 존엄 서버이다.
        - TLD DNS Server의 정보를 찾을 수 있도록 도와주는 역할을 한다.
        - 전 세계에 13개의 Root DNS Server가 구축되어 있으며, 각 Root DNS Server는 안정성과 부하 분산을 위해 여러 대로 복제되어 운영되고 있다.
    - TLD(Top-Level Domain) DNS Server
        - 도메인 등록 기관이 관리하는 서버이다.
        - Authoritative DNS Server의 정보를 찾을 수 있도록 도와주는 역할을 한다.
    - SLD(Second-Level Domain) DNS Server(= Authoritative DNS Server)
        - 일반적으로 도메인/호스팅 업체의 Name Server를 말한다.
        - 실제 개인 도메인과 IP 주소의 관계가 저장 및 변경되는 서버이다.
        - 개인 DNS를 구축해도 이 경우에 해당한다.  

3. Resolver = Local DNS Server(of ISP) = Recursor = Recursive DNS Server 
    - Resolver는 DNS Client(= Stub Resolver)로부터 요청을 받아 Name Server로 전달하고, Name Server로부터 정보(도메인 네임과 IP 주소)를 받아 DNS Client에게 제공하는 기능을 수행한다.
        - Resolver는 Recursive Query, Iterative Query 등의 방식을 통해 DNS 정보를 찾아온다.
        - Resolver는 하나의 Name Server에게 DNS 요청을 전달하고, 해당 서버에 정보가 없으면 다른 Name Server에게 요청을 보내 정보를 받아온다. 이처럼 Resolver는 수많은 Name Server에 접근하여 사용자로부터 요청 받은 도메인의 IP 정보를 조회하는 기능을 수행한다.  

4. DNS Client = Stub Resolver
    - 웹 브라우저에 도메인을 입력하면, 웹 브라우저는 운영체제에서 설정된 DNS Client(Stub Resolver)를 사용하여 DNS 조회를 요청한다.
        - 클라이언트에서 설정하는 DNS Server는 Stub Resolver를 의미한다
    - 운영체제에서 설정된 DNS Client는 현재 연결된 ISP의 DNS Server(=Resolver)와 통신하여 도메인 네임에 대응하는 IP 주소를 찾는다.
        - 도메인 네임에 대한 질의를 받은 DNS Client는 설정된 Resolver로 DNS Query를 전달하고, Resolver로부터 최종 결과를 응답 받아 웹 브라우저로 전달하는 인터페이스 기능만을 수행한다.
        - Stub Resolver는 수많은 Name Server의 구조를 파악할 필요 없이 Resolver가 구현된 DNS Server의 IP 주소만 파악하면 된다.  

---
## DNS 동작 과정
- 웹 브라우저에 “www.naver.com”을 입력하면, 웹 브라우저는 이전에 방문한 적이 있는 지 찾는다. 이전의 결과를 캐싱하고 있는 경우, 바로 해당 정보를 반환한다. 그렇지 않을 경우, 아래의 1~8의 과정을 거친다.  
- 캐시 확인 : 브라우저 캐시 확인, OS 캐시 확인, 라우터 캐시 확인, ISP(Resolver) 캐시 확인 등  
1. 웹 브라우저는 DNS Client(Stub Resolver)를 사용하여 Resolver에게 “www.naver.com”의 IP 주소를 요청한다.
2. Resolver는 Root DNS Server에게 “.com”이라는 도메인이 있는 지 요청한다.
3. Root DNS Server는 “.com” TLD DNS Server로 요청하라고 응답한다.
4. Resolver는 “.com” TLD DNS Server에게 “naver.com”이 있는 지 요청한다.
5. TLD DNS Server는 SLD DNS Server로 요청하라고 응답한다.
6. Resolver는 SLD DNS Server에게 “www.naver.com”이 있는 지 요청한다.
7. SLD DNS Server는 “125.209.222.141”로 가라고 응답한다.
8. Resolver는 DNS Client에게 “125.209.222.141”를 전달하고, 최종적으로 DNS Client는 웹 브라우저에게 전달한다.



---
참고 자료  
https://ko.wikipedia.org/wiki/도메인_네임   
https://ko.wikipedia.org/wiki/도메인_네임_시스템  
https://www.cloudflare.com/ko-kr/learning/dns/glossary/what-is-a-domain-name/  
https://hanamon.kr/dns란-도메인-네임-시스템-개념부터-작동-방식까지/  
https://velog.io/@qltkd5959/DNSDomain-Name-System란   
https://www.quora.com/What-are-domain-names  
chatgpt  
bard