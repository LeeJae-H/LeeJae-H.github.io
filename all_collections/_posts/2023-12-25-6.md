---
layout: post
title: 가상화란? + 가상화 방식(가상 머신, 컨테이너)
date: 2023-12-25
categories: [virtualization, server]
---
- **가상화란?**
<center><img src="https://github.com/LeeJae-H/LeeJae-H.github.io/assets/122717063/08318f83-7d46-446a-9bdd-09ddfc477713" width="500" height="300"></center>

- 가상화는 컴퓨팅 환경에서 하드웨어와 소프트웨어를 분리하여 리소스를 효율적으로 활용하고, 여러 개의 독립적인 환경을 하나의 물리적 시스템에서 실행하는 기술을 말한다. 가상화 기술은 IT 관리와 개발, 테스트, 보안 등 다양한 분야에서 활용되며, 여러 가지 가상화 유형이 있다.
    - 가상화란 컴퓨터에서 컴퓨터 리소스의 추상화를 일컫는 광범위한 개념이다. “다른 시스템, 응용 프로그램, 최종 사용자들이 물리적인 컴퓨터 리소스와 상호 작용하는 방식을 숨기는 기술”로 정의할 수 있다.  
<br>
- 가상화 방식에는 가상 머신 방식, 컨테이너 방식 등이 있다. 여기서는 일단 가상 머신 방식의 가상화를 기준으로 설명해보자.
- 가상화가 나타나기 전에, 하나의 하드웨어 시스템은 여러 개의 OS를 동시에 실행할 수 없었다. 
- 하나의 하드웨어 시스템에서 여러 개의 OS가 실행되는 방식은 가능했으나, 이는 다중 부팅과 같은 방식으로 이루어졌다.
- OS는 특권 명령 때문에 하나의 하드웨어 시스템 당 하나밖에 돌아갈 수 없다.
- 특권 명령(privileged instruction) : 시스템 요소들과 소통할 수 있는 명령, OS만 가능하다.
- 가상 머신 방식의 가상화를 통해 여러 OS가 하나의 하드웨어 시스템에서 동시에 실행될 수 있게 되며, 각 OS는 하이퍼바이저를 통해 하드웨어 리소스에 접근한다. 이를 통해 다양한 OS를 동시에 가동하면서 각 OS는 독립성을 유지할 수 있다.
- 가상 머신 방식의 가상화란 소프트웨어를 사용하여 단일 컴퓨터의 하드웨어 요소를 하나 이상의 가상 머신(VM)이라고 하는 가상 컴퓨터로 분할하는 기술을 의미한다. 쉽게 말해, 하나의 컴퓨터 안에 여러 개의 가상 컴퓨터를 만드는 것이라고 볼 수 있다. 
- 가상 머신을 생성하기 위해서 하이퍼바이저라는 소프트웨어를 사용한다. 하이퍼바이저는 한 개의 시스템을 별도의 고유하고 안전한 환경인 가상 머신으로 분할한다. 가상 머신은 하이퍼바이저에 의해 관리되며 시스템 리소스를 할당받게 된다.
- 가상 머신 방식의 가상화는 주로 CPU, 메모리, 스토리지, 네트워크 등과 같은 컴퓨팅 자원을 추상화하여 가상 환경으로 만들어, 이를 기반으로 가상 서버나 장치를 생성하여 리소스를 효율적으로 사용하고 분산 처리 능력을 강화하는 기술이다
- 가상화 전 : 빌드 서버(30% 효용률, 70% 잉여 자원), 웹 서버(50% 효용률), 메일 서버(10% 효용률)
- 가상화 후 : 통합 서버(빌드 서버, 웹 서버, 메일 서버)(90% 효용률) 
- 가상화 이전에는 각각의 서버가 낮은 활용도로 운영되는 반면, 가상화 이후에는 통합 서버가 높은 활용도로 운영되어 리소스를 효율적으로 활용한다.
- 가상화가 자원 효율성을 극대화시키는 것은 사실이지만, 가상화는 추가적인 오버헤드가 발생할 수 있다. 하이퍼바이저나 컨테이너 런타임이 중간 계층으로 작동하기 때문에, 일부 상황에서는 하나의 물리적인 서버에서 여러 개의 가상 머신을 실행함으로써 성능 저하가 발생할 수 있다.
- 일반적으로 가상화를 위해 하이퍼바이저를 사용한 가상 머신 방식을 사용하지만, 최근에는 컨테이너 방식의 가상화가 큰 관심을 받는 추세이다.
- 가상화 방식을 선택할 때는 사용 사례와 필요한 리소스 격리 수준에 따라 다른 방식을 선택한다. 가상 머신은 격리가 강력하고 더 다양한 운영체제를 지원할 수 있으며, 컨테이너는 가볍고 빠른 배포를 위해 적합하다.
- ex) LXC(Linux Container), Docker

**-가상 머신 방식의 가상화든, 컨테이너 방식의 가상화든 이러한 가상화 기술들은 제공자가 알아야 하는 기술이다. 단지 사용자는 가상화된 것을 제공받고, 사용하는 것 뿐이다.**

---
- **가상 머신과 컨테이너**
<center><img src="https://github.com/LeeJae-H/LeeJae-H.github.io/assets/122717063/989fdbc6-c83d-48f0-bdfe-7fc3f8afa48b" width="500" height="300"></center>
- 가상 머신은 하이퍼바이저를 사용하여 여러 개의 독립된 가상 환경을 생성하는 기술이다.
    - 일반적으로 Guest OS가 포함되므로 보통 수 GB에 해당하고, 애플리케이션을 실행할 때에도 먼저 가상 머신을 띄우고 자원을 할당한 다음, Guest OS를 부팅하여 애플리케이션을 실행해야 한다.
    - IaaS라고 볼 수 있다.  
<br>
- 컨테이너는 애플리케이션과 필요한 라이브러리를 격리된 환경에서 실행하는 기술이다.
    - 하이퍼바이저와 Guest OS가 필요하지 않으므로 더 가볍다. 일반적으로 컨테이너에는 OS가 포함되지 않아 크기가 수십 MB에 불과하고, 운영체제 부팅이 필요 없으므로 서비스를 시작하는 시간도 짧다. 
    - Paas라고 볼 수 있다.

---
참고 자료  
https://ko.wikipedia.org/wiki/가상화  
https://aws.amazon.com/ko/what-is/virtualization/  
https://www.vmware.com/kr/solutions/virtualization.html  
https://itwiki.kr/w/컨테이너_가상화  
http://wiki.hash.kr/index.php/가상화#.EC.84.9C.EB.B2.84_.EA.B0.80.EC.83.81.ED.99.94
https://www.youtube.com/watch?v=hb_4Tf6bAtY  
https://velog.io/@bonjaski0989/가상화-Virtualization  
https://velog.io/@zionedoha/클라우드와-가상화-차이  
https://tech.cloud.nongshim.co.kr/2018/09/18/가상화의-종류3가지/  
https://library.gabia.com/contents/infrahosting/7426/  
https://velog.io/@woodyn1002/기초-공부-가상화Docker-정리  
https://m.blog.naver.com/gkenq/10189821877  
chatgpt