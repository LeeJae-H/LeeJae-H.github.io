---
layout: post
title: 클라우드 스토리지
date: 2023-12-19
categories: [storage]
---
## Cloud Storage

- Cloud Storage는 데이터를 논리 풀에 저장하는 시스템이다. 논리 풀이라는 것은 일반적으로 물리적인 스토리지가 CSP에 의해 소유, 관리되는 복수의 서버들에 걸쳐 있는 데이터 스토리지 모델이다.
    - Cloud Storage는 가상화에 기반을 두고 있다.
    - 보통 파일은 한 개의 스토리지에 저장이 되는데, Cloud Storage는 한 개의 파일을 여러 대의 가상화된 물리 서버에 공통적으로 저장하는 개념이다.
- Cloud Storage는 CSP(Cloud Service Provider)를 통해 데이터와 파일을 인터넷에 저장할 수 있는 클라우드 컴퓨팅 모델이다.
    - CSP는 사용자가 필요로 할 때 거의 제한 없는 규모와 탄력적인 용량으로 데이터에 액세스할 수 있도록 스토리지 서버, 인프라. 네트워크를 안전하게 저장, 관리, 유지 보수한다.
    - 사용자는 Public 또는 Private 네트워크 연결을 통해 액세스할 수 있다.
- 장단점
    - 사용자는 스토리지 인프라를 개인적으로 구매하고 관리할 필요가 없다.
    - 필요에 따라 저장 공간을 쉽게 확장할 수 있다. 서비스 비용만 지불하면 바로 많은 용량을 쓸 수 있는 놀라운 확장성을 가지고 있다.
    - 데이터를 안전하게 백업하고 복구할 수 있는 기능을 제공한다.
    - 여러 지역에서 함께 연동되는 클라우드 컴퓨팅을 통해서 작동하기 때문에 외부에서 쉽게 접속할 수 있고, 웹 서비스를 통해서 접속할 수도 있으며, API를 이용하여 애플리케이션으로 접속할 수도 있다.
- 대표적으로 Google Drive, Dropbox, Microsoft OneDrive, AWS S3 등이 있다.

---
## Storage 유형
- **파일 스토리지, 블록 스토리지, 객체 스토리지**
    - **데이터를 저장하고 관리하는 방법**으로, 각각의 스토리지 유형은 특정한 용도와 특성을 가지고 있다.
        - 어떤 스토리지 유형을 선택할지는 데이터의 특성과 요구 사항에 따라 다르다.
        - **파일 스토리지, 블록 스토리지, 객체 스토리지 모두 물리적인 저장 장치를 기반으로 하는데, 이러한 저장 장치는 블록 스토리지로 분류된다.**
            - 데이터가 실제 저장되는 공간 → 데이터를 다루는 방법
            - 물리적인 저장 장치( = hdd, ssd 등의 블록 스토리지) → 블록 스토리지
            - 물리적인 저장 장치( = hdd, ssd 등의 블록 스토리지) → 파일 스토리지
            - 물리적인 저장 장치( = hdd, ssd 등의 블록 스토리지) → 객체 스토리지
        - 클라우드 서비스 제공업체들이 세 가지 스토리지 유형 모두 제공하지만, **대다수의 클라우드 서비스 제공업체들이 객체 스토리지를 제공**한다.
        - 대부분의 애플리케이션에서 파일 또는 객체 스토리지는 실제로 기본 블록 스토리지 맨 위에 있는 계층이다. 블록 스토리지는 파일 또는 객체 스토리지 시스템이 구축되는 기반으로 생각할 수 있다.
        - 정보화 시대(블록 스토리지) → 데이터 중심의 시대(객체 스토리지)
 
---
## 블록 스토리지(Block Storage) : 데이터를 임의로 구성해 동일한 크기의 볼륨으로 나눈다.
![image1](https://github.com/LeeJae-H/LeeJae-H.github.io/assets/122717063/2ae49c97-a301-4936-b0bf-1905ceddacab)

- **블록 스토리지는 물리적으로 데이터(파일)를 고정된 크기의 블록 단위로 나누어 저장하고 관리**한다.
    - 각 블록들은 연속적으로 저장될 필요가 없다.
    - 각 블록에는 빠른 저장 및 검색을 위한 고유한 식별자가 있다. 이는 스토리지 시스템이 블록을 원하는 곳에 저장할 수 있도록 해준다.
    - 각 블록이 서로 다른 고유 주소를 가지며 서로 **독립적으로 존재**하기 때문에 계층 구조가 필요 없다.
- 데이터를 작은 블록 단위로 나누어 저장하기 때문에 **필요한 부분만 읽고 쓸 수 있어서** 효율적이다.
    - 예를 들어, 특정 파일의 일부만 수정해야 할 경우 전체 파일을 다시 저장할 필요 없이 변경된 블록만 업데이트한다. 이는 대량의 데이터를 더 빠르게 처리할 수 있게 해준다.
    - 블록 스토리지는 액세스와 편집이 자주 수행되는 데이터에 적합하고, 더 많은 데이터를 저장해야 할수록 블록 스토리지를 사용하는 것이 유리하다.
- 각 블록들은 서로 다른 운영 체제에서 액세스할 수 있어 사용자는 자유롭게 데이터를 설정할 수 있다.
    - 예를 들어, 일부 데이터는 Linux에 저장하고 일부는 Window에 저장할 수 있다. 이는 데이터를 효율적이고 안정적으로 저장하는 방법이며 사용과 관리도 간편하다.
- 장단점
    - 동일한 파일 또는 객체를 나타내는 블록을 서로 인접하여 저장할 필요 없이 가장 편리한 곳에 블록을 저장할 수 있어 효율성이 높다.
    - 경우에 따라 블록 스토리지는 읽어야 할 데이터의 경로가 반드시 하나만 있는 것은 아니기 때문에 데이터를 매우 빠르게 검색할 수 있다. (하나의 큰 파일을 읽기 vs 하나의 큰 파일이 쪼개진 블록들을 동시에 읽기)
    - 대용량의 데이터를 다루기 때문에 저장 및 유지 관리 비용이 상대적으로 높을 수 있다.
    - 메타 데이터를 처리하는 기능이 제한적일 수 있다. 메타 데이터 관리가 부족하면 파일이나 객체를 찾거나 관리하는데 어려움이 있을 수 있다.
    - 애플리케이션 또는 데이터베이스 수준에서 다루어져야 하므로 개발자나 시스템 관리자의 업무 부담이 늘어날 수 있다.
- 사용
    - 주로 운영체제 레벨에서 사용되며 파일 시스템 등을 위해 활용된다.
    - NAS, SAN은 블록 스토리지를 활용하여 데이터를 제공한다.
    - 가상화 환경(VM, Container), 데이터베이스 서버 등에서 사용된다.
    - 대규모 기업 등의 데이터 센터에서 블록 스토리지를 사용하여 대량의 데이터를 관리하고 처리한다.

---
## 파일 스토리지(File Storage) : 데이터를 폴더의 파일 계층 구조로 구성하고 표현한다.
![image2](https://github.com/LeeJae-H/LeeJae-H.github.io/assets/122717063/6da8f4cb-b80d-47e1-bd8b-ef99ebc20838)

- 파일 스토리지는 **논리적으로 데이터를 파일 단위로 나누어 저장하고 관리**한다.
    - 파일은 폴더 안에 단일 정보로 저장되는데, 파일을 폴더와 하위 폴더의 계층 구조로 체계화한다.
    - 파일은 제한된 양의 메타데이터를 사용해 구성 및 검색된다. 해당 데이터에 접근해야 하는 경우 컴퓨터는 그 데이터를 찾기 위해 경로를 알아야 한다.
    - 파일은 폴더/파일 경로를 사용해 접근할 수 있고, 어떠한 형식의 파일이든 접근 가능하다.
- 파일 스토리지를 사용할 때, 사용자는 파일 시스템을 명시적으로 설정하거나 관리할 필요가 없다.
    - **“파일 스토리지 = 블록 스토리지 + 파일 시스템”**이라는 개념으로 이해할 수 있다.
- 파일 스토리지 시스템은 단순히 파일 시스템에서 사용할 수 있는 저장 공간을 늘리는 것으로만 해결할 수 없다.
    - 주로 두 가지 이유 때문이다.
        1. 파일 시스템은 특정한 용량까지만 데이터를 관리할 수 있다. 이 한계를 넘어서 더 많은 데이터를 추가하려면 새로운 파일 시스템을 생성해야 한다.
        2. 파일 시스템은 일정한 성능을 유지하기 위해 설계되어 있다. 따라서 과도한 데이터 양이나 빠른 데이터 액세스가 필요한 경우에는 추가적인 시스템이 필요할 수 있다.
    - 이러한 이유로 파일 스토리지 시스템은 더 많은 용량을 추가하는 것 외에도 다른 전략을 사용해야 할 수 있다.
        - 파일 스토리지 시스템은 더 많은 용량을 추가해 확장하는 것이 아닌, 더 많은 시스템을 추가해 스케일 아웃 등의 방법을 사용해야 한다.
        - 예를 들어, 기존 파일 서버가 용량과 성능 면에서 한계에 도달했다면, 새로운 파일 서버를 추가하여 데이터를 분산시키고 성능을 향상시킬 수 있다. 이렇게 하면 전체적으로 더 많은 데이터를 다룰 수 있게 된다.
- 장단점
    - 파일 스토리지는 기능이 다양하며 거의 모든 것을 저장할 수 있고, 다수의 복잡한 파일을 저장하기에 좋으며 사용자가 신속하게 탐색할 수 있다.
    - 파일은 생성 날짜, 파일 크기 등의 첨부되는 메타데이터가 제한적일 수 있다.
    - 데이터 양이 늘어나면서 문제를 일으킬 수 있다. 예를 들어, 파일과 폴더를 계속 추적하기 위해 파일 시스템에 대한 자원 요구가 증가하기 때문에 성능이 떨어질 수 있다.
- 사용
    - 개인 컴퓨터 및 노트북에서 사용된다.
    - 파일 스토리지는 네트워크에 연결된 저장 장치를 통해 파일을 공유하고 관리한다. 네트워크 연결을 통해 여러 사용자가 파일을 읽고 쓸 수 있다. NAS 서버 등에서 사용된다.
    - 기업이나 조직에서 문서를 관리하기 위해 파일 스토리지 시스템을 사용한다.
    - 웹 사이트의 파일들(HTML, 이미지, 스크립트 등)은 웹 서버의 파일 스토리지에 저장되며, 이를 통해 사용자들에게 제공된다.
    - 미디어 서버에서 음악, 비디오 등의 미디어 파일을 관리하고 스트리밍하는데 사용된다.
    - 컴퓨터 프로그램이나 소프트웨어 어플리케이션에서 사용되는 데이터를 저장하는데 주로 활용된다.
        - 워드 프로세서, 스프레드시트 프로그램 등의 다양한 애플리케이션에서 사용자가 생성하거나 수정한 파일을 파일 스토리지에 저장한다.
    - 하드 드라이브에서 사용되며, 하드 드라이브의 관점에서 보는 파일과 사용자의 관점에서 보는 파일이 동일하다.

---
## 객체 스토리지(Object Storage) : 데이터를 객체 단위로 나누고, 객체와 메타데이터를 연결한다.
![image3](https://github.com/LeeJae-H/LeeJae-H.github.io/assets/122717063/cd9a89a5-3654-4e51-b1f6-03664ecc8614)

- 객체 스토리지는 **논리적으로 데이터(파일)를 객체 단위로 나누어 저장하고 관리**한다.
    - **객체 = chunk**, 블록과 비슷한 개념이다.
    - 데이터(파일)는 chunk 단위로 랜덤하게 쪼개지며, 각각의 chunk가 분산 저장 방식을 통하여 곳곳에 뿌려지게 되고, 각각의 chunk마다 메타데이터 값들을 갖고 저장된다.
    - 대용량 파일을 작은 객체로 분할하면 병렬로 여러 부분을 동시에 읽고 쓰는 것이 가능해지며, 더 빠른 데이터 접근을 가능하게 한다.
    - 예를 들어, 하나의 DB의 테이블이 11개(1개는 dummy)의 chunk로 쪼개진다. dummy는 있을 수도 있고 없을 수도 있다.
    - 각 chunk는 서버의 블록이나 폴더에 파일을 보관하는 대신 repository(단일 주소 공간)에 저장된다.
    - 일반적으로 객체 스토리지 시스템에서 repository는 데이터가 최종적으로 저장되는 논리적인 공간을 가리키며, 단일한 주소 공간에서 모든 chunk가 저장되는 곳을 의미한다. 각각의 chunk가 이 repository에 저장되고 관리된다.
    - repository는 일종의 중앙 저장소로서 보통 분산 시스템에서 관리되며, 데이터는 여러 서버나 노드에 걸쳐 분산되어 저장된다.
        - 각 서버나 노드는 데이터를 물리적으로 저장하고 관리하는 역할을 수행하며, 이들은 네트워크를 통해 통신하여 데이터를 공유하고 동기화한다. 이를 통해 객체 스토리지 시스템은 높은 가용성과 확장성을 제공할 수 있다.
        - 여러 서버나 노드는 하나의 스토리지를 공유한다. 이는 분산 시스템의 한 형태로서, 데이터를 여러 서버에 분산하여 저장하고 관리함으로써 데이터의 가용성과 신뢰성을 높이는 목적으로 사용된다.
    - 객체(chunk)는 사실상 무제한의 확장성을 제공하는 보안 버킷에 저장된다.
        - repository > 버킷 > 객체(chunk)
    - 즉, 객체 스토리지는 파일이 작게 나뉘어 여러 하드웨어에 분산되는 평면적 구조이다.
    - **이러한 작업들(chunk 단위로 나누고 저장되는 방식 등)은 일반적으로 객체 스토리지 시스템에서 자동으로 처리된다.**
- 객체 스토리지는 블록 또는 파일 스토리지와는 다르게 파일을 설명하는 데 도움이 되는 포괄적인 메타데이터를 지원한다.
    - 메타데이터에는 사용 기간, 개인 정보, 보안 등의 상세한 내용이 포함되어 있어서, 파일에 포함된 콘텐츠를 직접 처리하지 않고 대용량 파일을 이해 및 분석하는 데 도움이 된다.
        - 예를 들어, 병원에서 환자의 X선 이미지를 저장 및 처리하는 방법을 살펴보자. X선 파일은 생성된 날짜, 소유자, 위치, 크기와 같은 X선 파일과 관련해 메타데이터가 제한되어있다. 반면, X선 객체는 다양한 메타데이터 정보를 저장할 수 있다. 파일에 지정된 동일한 태그뿐만 아니라 환자 이름, 부상 세부 정보, X선 촬영 부위를 포함 할 수 있다. 따라서, 의사가 참조할 관련 정보를 가져올 때 매우 유용하며, 메타데이터는 의사의 진단서라고 볼 수 있다.
    - 객체는 전송된 형식 그대로 데이터를 저장하며, 데이터를 손쉽게 액세스하고 분석할 수 있도록 **메타데이터를 사용자 지정할 수 있다.**
        - 객체는 계층이 없고 메타데이터는 완전한 사용자 지정이 가능하기 때문에 파일 또는 블록 스토리지보다 하드웨어 제한이 훨씬 더 적다.
    - 객체 스토리지는 고유 식별자와 메타데이터를 통해 데이터를 효율적으로 관리한다.
        - 데이터를 검색하기 위해 스토리지 운영체제는 메타데이터와 고유 식별자를 사용한다.
        - 기존의 파일 또는 블록 기반의 환경 등과는 다르게 검색 등에서 차별화된다. 파일을 쉽게 정렬하고 검색할 수 있다.
    - 데이터가 고유 식별자, 메타데이터와 함께 객체로 저장되는 방식은 상대적으로 경제적이지만, 편집이 필요하지 않은 데이터에만 적합하다.
        - **객체는 수정이 불가능**하기 때문에 객체 작성을 한번에 완료해야 한다. 파일을 편집할 수 없기 때문에 전체 파일을 다시 쓰거나 다시 업로드해야 한다.
        - 몇몇 시스템에서는 일부 객체를 수정할 수 있는 경우도 있다.
- 장단점
    - 객체 스토리지는 **비정형 데이터**의 대규모 스토어를 구축하기 위한 데이터 스토리지 아키텍처이다.
        - 조직에서는 갈수록 증가하는 비정형 데이터를 저장해야 하는데, 이러한 데이터를 저장할 확장 가능하고 효율적인 방법이 객체 스토리지이다.
        - 객체는 PDF, 이미지, 비디오 파일과 같은 다양한 유형의 데이터를 포함할 수 있으며, 그 크기에도 제한이 없다.
    - **객체 스토리지는 확장하기도 쉬우므로 클라우드 스토리지에 매우 적합**하고, 사용한 만큼만 비용을 지불하면 되므로 비용 효율적이다. 또한 정적 데이터에 적합한 스토리지 시스템이다.
    - 객체 스토리지는 전통적인 데이터베이스와 잘 연동되지 않는다.
        - 객체 작성이 느리게 진행되는 데다가, 객체 스토리지 API를 사용하기 위해 애플리케이션을 작성하는 일이 파일 스토리지를 사용할 때만큼 간단하지 않기 때문이다. 또한 블록 스토리지와 비교해 액세스 속도가 하락하며, 스토리지 위치 제한/정의에 어려움이 있다.
        - 객체 스토리지에는 단순한 HTTP API가 필요하며, 이는 대부분의 클라이언트에서 모든 언어로 사용된다.
        - 몇몇 클라우드 제공업체들은 객체 스토리지와 데이터베이스를 조합해 사용할 수 있는 서비스를 제공하기도 한다.
- 사용
    - 객체 스토리지는 대용량의 데이터를 저장하고 이를 처리하는 용도로 주로 활용된다. Hadoop, Spark 등의 빅데이터 프레임워크에서 객체 스토리지를 활용하여 데이터를 관리하고 처리한다.
    - 많은 웹 애플리케이션과 모바일 앱이 사용자 업로드된 파일, 이미지, 비디오 등을 저장하기 위해 객체 스토리지를 사용한다. 이를 통해 사용자는 애플리케이션을 통해 업로드한 데이터를 안전하게 보관할 수 있다.
    - 객체 스토리지는 중요한 데이터의 백업과 아카이빙을 위해 사용된다. 이를 통해 데이터의 안전성과 보관 기간을 확보할 수 있다.
    - 로그 데이터는 구조화되지 않은 형태로 생성되기 때문에 객체 스토리지가 일반적으로 로그 데이터를 저장하기에 더 적합하다. 또한, 로그 데이터를 수집, 처리하고 분석하기 위해 데이터베이스와 객체 스토리지를 혼용하는 경우가 많다. 예를 들어, 로그 데이터를 객체 스토리지에 저장하고 필요에 따라 데이터베이스로 전송하여 분석하거나 조회하는 등의 방식으로 활용될 수 있다.

---
참고 자료

> https://aws.amazon.com/ko/what-is/cloud-storage/
> https://www.redhat.com/ko/topics/data-storage/file-block-object-storage
>https://www.alibabacloud.com/ko/knowledge/difference-between-object-storage-file-storage-block-storage
>https://www.alibabacloud.com/ko/knowledge/what-is-object-storage?spm=a2c64.255190.1234557720.5.3ef51326H49VXc
>https://www.youtube.com/watch?v=YBc8Mx89Af0
>https://www.iwinv.kr/storage/block.html