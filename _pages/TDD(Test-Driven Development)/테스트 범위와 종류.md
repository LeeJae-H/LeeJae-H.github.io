---
title: "테스트 범위와 종류"
tags:
    - java
date: "2024-12-30"
thumbnail: "/assets/img/thumbnail/sample.png"
---
# 테스트 범위에 따른 테스트 종류
<img src="https://github.com/user-attachments/assets/99eef680-03e0-43a1-a266-5da10c73bb30" style="width:600px;" />
- 일반적인 웹 애플리케이션 구조에서, 테스트 종류는 테스트 범위에 따라 세 가지로 나눠볼 수 있다.
    - **단위 테스트(Unit Testing)**
        - 단위 테스트는 개별 코드나 컴포넌트가 기대한대로 동작하는지 확인한다.
            - **일반적으로, 한 클래스나 한 메서드를 테스트한다.**
        - 외부 의존성은 테스트 대역(Stub, Mock 등)으로 대체한다.
    - **통합 테스트(Integration Testing)**
        - 통합 테스트는 시스템의 각 구성 요소가 올바르게 연동되는지 확인한다.
            - **일반적으로, 데이터베이스, 외부 API, 프레임워크, 라이브러리 간의 연동을 테스트한다.**
    - **기능 테스트(Functional Testing)**
        - 기능 테스트는 사용자 입장에서 시스템이 제공하는 기능이 올바르게 동작하는지 확인한다.
            - 일반적으로, 특정 사용자의 흐름이나 요구 사항을 테스트한다.
        - 사용자가 직접 사용하는 웹 브라우저(또는 모바일 앱)부터 시작해서 데이터베이스(또는 외부 서비스)에 이르기까지 모든 구성 요소를 하나로 엮어서 검사하기 때문에 **E2E(End to end) 테스트**로도 볼 수 있다.

# 테스트 범위에 따른 테스트 작성 요령
<img src="https://github.com/user-attachments/assets/c28cd0ed-4ec4-4a6b-999e-e911da8ce53b" style="width:340px;" />

## 테스트 범위 간 차이
- `통합 테스트`나 `기능 테스트`로는 상황을 준비하거나 결과 확인이 어렵거나 불가능할 때가 있다. 외부 시스템과 연동해야 하는 기능이 특히 그렇다. 이런 경우에는 `단위 테스트`와 대역을 조합해서 상황을 만들고 결과를 확인해야 한다.
- `통합 테스트`는 DB 연결, 스프링 컨테이너 초기화와 같이 테스트 실행 속도를 느리게 만드는 요인이 많다. `기능 테스트`는 추가로 브라우저나 앱을 구동하고 화면의 흐름에 따라 알맞은 상호 작용을 해야 한다. 반면에, `단위 테스트`는 서버를 구동하거나 DB를 준비할 필요가 없다. 테스트 대상이 의존하는 기능을 대역으로 처리하면 되므로 테스트 실행 속도가 빠르다.
- `통합 테스트`를 실행하려면 DB와 같은 연동 대상을 구성해야 한다. `기능 테스트`를 실행하려면 웹 서버를 구동하거나 모바일 앱을 폰에 설치해야 할 수도 있다. 즉, `통합 테스트`나 `기능 테스트`는 테스트 상황을 만들어내기 위해 많은 노력이 필요하다. 반면에 `단위 테스트`는 테스트 코드를 빼면 따로 준비할 것이 없다.

> 이전 글들에서 살펴본 테스트들이 대부분 (서비스) 단위 테스트이다!


## 테스트 작성 요령
- 기능 테스트나 통합 테스트에서 모든 예외 상황을 테스트하면 단위 테스트는 줄어든다. -> 각 테스트가 다루는 내용이 중복되기 때문
    - 그러나, 테스트 속도는 기능 테스트와 통합 테스트보다 단위 테스트가 빠르기 때문에 가능하면 단위 테스트에서 다양한 상황을 다루고, 기능 테스트나 통합 테스트는 주요 상황에 초점을 맞춰야 한다.







# 통합 테스트 예시

## 스프링 부트와 DB 통합 테스트






---
- 참고 자료
테스트 주도 개발 시작하기(저자: 최범균)   
https://martinfowler.com/articles/practical-test-pyramid.html  
https://reflectoring.io/spring-boot-web-controller-test/  
https://dingdingmin-back-end-developer.tistory.com/entry/Springboot-Test-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1-1  
https://stackoverflow.com/questions/64541192/assertthatthrownby-check-field-on-custom-exception  